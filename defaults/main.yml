---
# Whether or not to compile unbound from source
unbound_compile: false
# The unbound version to download the source from <https://unbound.net/download.html>
unbound_compile_version: 1.6.7
# Checksum to compare the download the file against <https://unbound.net/download.html>
unbound_compile_sha256: 4e7bd43d827004c6d51bef73adf941798e4588bdb40de5e79d89034d69751c9f
# The arguments given to the `./configure` command. <!--Solaris users should use --with-solaris-threads -->
unbound_compile_config: "--enable-dnscrypt --with-username={{unbound.server.username|default(unbound)}} --with-libevent --with-run-dir={{unbound.server.directory}} --with-conf-file={{unbound.server.directory}}/unbound.conf"

# Whether to use the optimisation guidelines from <http://unbound.nlnetlabs.nl/documentation/howto_optimise.html>
unbound_optimise: false
# Percentage of physical memory to use for unbound. Only used when `unbound_optimise` is true
unbound_optimise_memory: 100

## DNS-over-TLS settings
# see <https://github.com/publicarray/ansible-role-unbound/wiki/Examples#dns-over-tls> for an example
# common name for cert signing request
unbound_tls_domain: example.com
# must be one of: selfsigned,assertonly,acme,acme-cf. no other provider than selfsigned and acme-cf are implemented just yet
unbound_tls_cert_provider: selfsigned
unbound_tls_cf_email:
# Do paste your plaintext key! https://docs.ansible.com/ansible/latest/playbooks_vault.html
unbound_tls_cf_api_key:
unbound_tls_cf_debug: true
# production: https://acme-v01.api.letsencrypt.org/directory
# Staging: https://acme-staging.api.letsencrypt.org/directory
unbound_tls_ca: https://acme-staging.api.letsencrypt.org/directory
# Production: https://acme-v01.api.letsencrypt.org/terms
# Staging: https://acme-staging.api.letsencrypt.org/terms
unbound_tls_ca_terms: https://acme-staging.api.letsencrypt.org/terms

## Main unbound configuration
# See <https://unbound.net/documentation/unbound.conf.html> for more options and detailed descriptions
# Note: In Ansible the variables must use underscores (_) not dashes (-) as separators
unbound:
  server:
    verbosity: 1
    # interface: [127.0.0.1, "::1"]
    # access_control: 0.0.0.0/0 allow
    # use_syslog: no
    # log_time_ascii: yes
    logfile: "unbound.log"
    auto_trust_anchor_file: "root.key"
    # Please update root.hints every six months or so. For example:
    # wget -O /usr/local/etc/unbound/root.hints https://www.internic.net/domain/named.cache
    root_hints: "root.hints"
    pidfile: "{{_unbound.pidfile|default('unbound.pid')}}"
    username: "{{_unbound.user}}"
    # if not compiling use distribution default directory else use unbound default directory
    directory: "{{_unbound.conf_dir if unbound_compile == false else \"/usr/local/etc/unbound\"}}"
    chroot: "{{_unbound.conf_dir if unbound_compile == false else \"/usr/local/etc/unbound\"}}"
    ## DNS-over-TLS
    # interface: [0.0.0.0@853, '::0@853']
    # ssl_service_key: "private.key"
    # ssl_service_pem: "certificate.pem"
    # ssl_port: 853
  remote_control:  # unbound-control
    control_enable: false
